<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Vector space representation of a two-variable regression model — regvec3d • matlib</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vector space representation of a two-variable regression model — regvec3d"><meta name="description" content="regvec3d calculates the 3D vectors that represent the projection of a two-variable multiple
regression model from n-D observation space into the 3D mean-deviation variable space that they span, thus
showing the regression of y on x1 and x2 in the model lm(y ~ x1 + x2).
The result can be used to draw 2D and 3D vector diagrams accurately reflecting the partial and marginal
relations of y to x1 and x2 as vectors in this representation."><meta property="og:description" content="regvec3d calculates the 3D vectors that represent the projection of a two-variable multiple
regression model from n-D observation space into the 3D mean-deviation variable space that they span, thus
showing the regression of y on x1 and x2 in the model lm(y ~ x1 + x2).
The result can be used to draw 2D and 3D vector diagrams accurately reflecting the partial and marginal
relations of y to x1 and x2 as vectors in this representation."><meta property="og:image" content="http://friendly.github.io/matlib/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">matlib</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/data-beta.html">Vector Spaces of Least Squares and Linear Equations</a></li>
    <li><a class="dropdown-item" href="../articles/det-ex1.html">Properties of determinants</a></li>
    <li><a class="dropdown-item" href="../articles/det-ex2.html">Evaluation of determinants</a></li>
    <li><a class="dropdown-item" href="../articles/eigen-ex1.html">Eigenvalues and Eigenvectors: Properties</a></li>
    <li><a class="dropdown-item" href="../articles/eigen-ex2.html">Eigenvalues: Spectral Decomposition</a></li>
    <li><a class="dropdown-item" href="../articles/ginv.html">Generalized inverse</a></li>
    <li><a class="dropdown-item" href="../articles/gramreg.html">Gram-Schmidt Orthogonalization and Regression</a></li>
    <li><a class="dropdown-item" href="../articles/inv-ex1.html">Inverse of a matrix</a></li>
    <li><a class="dropdown-item" href="../articles/inv-ex2.html">Matrix inversion by elementary row operations</a></li>
    <li><a class="dropdown-item" href="../articles/linear-equations.html">Solving Linear Equations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/friendly/matlib/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Vector space representation of a two-variable regression model</h1>
      <small class="dont-index">Source: <a href="https://github.com/friendly/matlib/blob/HEAD/R/regvec3d.R" class="external-link"><code>R/regvec3d.R</code></a></small>
      <div class="d-none name"><code>regvec3d.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>regvec3d</code> calculates the 3D vectors that represent the projection of a two-variable multiple
regression model from n-D <em>observation</em> space into the 3D mean-deviation <em>variable</em> space that they span, thus
showing the regression of <code>y</code> on <code>x1</code> and <code>x2</code> in the model <code>lm(y ~ x1 + x2)</code>.
The result can be used to draw 2D and 3D vector diagrams accurately reflecting the partial and marginal
relations of <code>y</code> to <code>x1</code> and <code>x2</code> as vectors in this representation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">regvec3d</span><span class="op">(</span><span class="va">x1</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'formula'</span></span>
<span><span class="fu">regvec3d</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  which <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  <span class="va">name.x1</span>,</span>
<span>  <span class="va">name.x2</span>,</span>
<span>  <span class="va">name.y</span>,</span>
<span>  <span class="va">name.e</span>,</span>
<span>  <span class="va">name.y.hat</span>,</span>
<span>  <span class="va">name.b1.x1</span>,</span>
<span>  <span class="va">name.b2.x2</span>,</span>
<span>  abbreviate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">regvec3d</span><span class="op">(</span></span>
<span>  <span class="va">x1</span>,</span>
<span>  <span class="va">x2</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  normalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  name.x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.e <span class="op">=</span> <span class="st">"residuals"</span>,</span>
<span>  name.y.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat"</span><span class="op">)</span>,</span>
<span>  name.b1.x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"b1"</span>, <span class="va">name.x1</span><span class="op">)</span>,</span>
<span>  name.b2.x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"b2"</span>, <span class="va">name.x2</span><span class="op">)</span>,</span>
<span>  name.y1.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat 1"</span><span class="op">)</span>,</span>
<span>  name.y2.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat 2"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-">x1<a class="anchor" aria-label="anchor" href="#arg-x-"></a></dt>
<dd><p>The generic argument or the first predictor passed to the default method</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to methods</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A two-sided formula for the linear regression model. It must contain two quantitative predictors
(<code>x1</code> and <code>x2</code>) on the right-hand-side.  If further predictors are included, <code>y</code>,
<code>x1</code> and <code>x2</code> are taken as residuals from the their linear fits on these variables.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame in which the variables in the model are found</p></dd>


<dt id="arg-which">which<a class="anchor" aria-label="anchor" href="#arg-which"></a></dt>
<dd><p>Indices of predictors variables in the model taken as <code>x1</code> and <code>x2</code></p></dd>


<dt id="arg-name-x-">name.x1<a class="anchor" aria-label="anchor" href="#arg-name-x-"></a></dt>
<dd><p>Name for <code>x1</code> to be used in the result and plots. By default, this is taken as the
name of the <code>x1</code> variable in the <code>formula</code>, possibly abbreviated according to <code>abbreviate</code>.</p></dd>


<dt id="arg-name-x-">name.x2<a class="anchor" aria-label="anchor" href="#arg-name-x-"></a></dt>
<dd><p>Ditto for the name of <code>x2</code></p></dd>


<dt id="arg-name-y">name.y<a class="anchor" aria-label="anchor" href="#arg-name-y"></a></dt>
<dd><p>Ditto for the name of <code>y</code></p></dd>


<dt id="arg-name-e">name.e<a class="anchor" aria-label="anchor" href="#arg-name-e"></a></dt>
<dd><p>Name for the residual vector. Default: <code>"residuals"</code></p></dd>


<dt id="arg-name-y-hat">name.y.hat<a class="anchor" aria-label="anchor" href="#arg-name-y-hat"></a></dt>
<dd><p>Name for the fitted vector</p></dd>


<dt id="arg-name-b-x-">name.b1.x1<a class="anchor" aria-label="anchor" href="#arg-name-b-x-"></a></dt>
<dd><p>Name for the vector corresponding to the partial coefficient of <code>x1</code></p></dd>


<dt id="arg-name-b-x-">name.b2.x2<a class="anchor" aria-label="anchor" href="#arg-name-b-x-"></a></dt>
<dd><p>Name for the vector corresponding to the partial coefficient of <code>x2</code></p></dd>


<dt id="arg-abbreviate">abbreviate<a class="anchor" aria-label="anchor" href="#arg-abbreviate"></a></dt>
<dd><p>An integer.  If <code>abbreviate &gt;0</code>, the names of <code>x1</code>, <code>x2</code> and <code>y</code>
are abbreviated to this length before being combined with the other <code>name.*</code> arguments</p></dd>


<dt id="arg-x-">x2<a class="anchor" aria-label="anchor" href="#arg-x-"></a></dt>
<dd><p>second predictor variable in the model</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>response variable in the model</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>logical; if <code>TRUE</code>, standardize each of <code>y</code>, <code>x1</code>, <code>x2</code> to standard scores</p></dd>


<dt id="arg-normalize">normalize<a class="anchor" aria-label="anchor" href="#arg-normalize"></a></dt>
<dd><p>logical; if <code>TRUE</code>, normalize each vector relative to the maximum length of all</p></dd>


<dt id="arg-name-y-hat">name.y1.hat<a class="anchor" aria-label="anchor" href="#arg-name-y-hat"></a></dt>
<dd><p>Name for the vector corresponding to the marginal coefficient of <code>x1</code></p></dd>


<dt id="arg-name-y-hat">name.y2.hat<a class="anchor" aria-label="anchor" href="#arg-name-y-hat"></a></dt>
<dd><p>Name for the vector corresponding to the marginal coefficient of <code>x2</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class “regvec3d”, containing the following components</p>
<dl><dt>model</dt>
<dd><p>The “lm” object corresponding to <code>lm(y ~ x1 + x2)</code>.</p></dd>

            <dt>vectors</dt>
<dd><p>A 9 x 3 matrix, whose rows correspond to the variables in the model,
               the residual vector, the fitted vector, the partial fits for <code>x1</code>, <code>x2</code>,
               and the marginal fits of <code>y</code> on <code>x1</code> and <code>x2</code>.
               The columns effectively represent <code>x1</code>, <code>x2</code>, and <code>y</code>, but
               are named <code>"x"</code>, <code>"y"</code> and <code>"z"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If additional variables are included in the model, e.g., <code>lm(y ~ x1 + x2 + x3 + ...)</code>, then
<code>y</code>, <code>x1</code> and <code>x2</code> are all taken as <em>residuals</em> from their separate linear fits
on <code>x3 + ...</code>, thus showing their partial relations net of (or adjusting for) these additional predictors.</p>
<p>A 3D diagram shows the vector <code>y</code> and the plane formed by the predictors,
<code>x1</code> and <code>x2</code>, where all variables are represented in deviation form, so that
the intercept need not be included.</p>
<p>A 2D diagram, using the first two columns of the result, can be used to show the projection
of the space in the <code>x1</code>, <code>x2</code> plane.</p>
<p>In these views, the ANOVA representation of the various sums of squares for the regression
predictors appears as the lengths of the various vectors.  For example, the error sum of
squares is the squared length of the <code>e</code> vector, and the regression sum of squares is
the squared length of the <code>yhat</code> vector.</p>
<p>The drawing functions <code><a href="vectors.html">vectors</a></code> and <code>link{vectors3d}</code> used by the <code><a href="plot.regvec3d.html">plot.regvec3d</a></code> method only work
reasonably well if the variables are shown on commensurate scales, i.e., with
either <code>scale=TRUE</code> or <code>normalize=TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="methods-by-class-">Methods (by class)<a class="anchor" aria-label="anchor" href="#methods-by-class-"></a></h2>

<ul><li><p><code>regvec3d(formula)</code>: Formula method for regvec3d</p></li>
<li><p><code>regvec3d(default)</code>: Default method for regvec3d</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Fox, J. (2016). <em>Applied Regression Analysis and Generalized Linear Models</em>, 3rd ed., Sage, Chapter 10.</p>
<p>Fox, J. and Friendly, M. (2016). "Visualizing Simultaneous Linear Equations, Geometric Vectors, and
Least-Squares Regression with the matlib Package for R". <em>useR Conference</em>, Stanford, CA, June 27 - June 30, 2016.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="plot.regvec3d.html">plot.regvec3d</a></code></p>
<p>Other vector diagrams:
<code><a href="Proj.html">Proj</a>()</code>,
<code><a href="arc.html">arc</a>()</code>,
<code><a href="arrows3d.html">arrows3d</a>()</code>,
<code><a href="circle3d.html">circle3d</a>()</code>,
<code><a href="corner.html">corner</a>()</code>,
<code><a href="plot.regvec3d.html">plot.regvec3d</a>()</code>,
<code><a href="pointOnLine.html">pointOnLine</a>()</code>,
<code><a href="vectors.html">vectors</a>()</code>,
<code><a href="vectors3d.html">vectors3d</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmurdoch/rgl" class="external-link">rgl</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">therapy.vec</span> <span class="op">&lt;-</span> <span class="fu">regvec3d</span><span class="op">(</span><span class="va">therapy</span> <span class="op">~</span> <span class="va">perstest</span> <span class="op">+</span> <span class="va">IE</span>, data<span class="op">=</span><span class="va">therapy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">therapy.vec</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        x         y         z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> perstest      0.50000000 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IE            0.02000000 0.3893584 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy       0.60000000 0.7499516 0.2785185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> residuals     0.00000000 0.0000000 0.2785185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat   0.60000000 0.7499516 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b1 perstest   0.56147757 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b2 IE         0.03852243 0.7499516 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat 1 0.60000000 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat 2 0.04000000 0.7787169 0.0000000</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">therapy.vec</span>, col.plane<span class="op">=</span><span class="st">"darkgreen"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">therapy.vec</span>, dimension<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="regvec3d-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Friendly, John Fox, Phil Chalmers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

