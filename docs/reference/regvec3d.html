<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Vector space representation of a two-variable regression model — regvec3d • matlib</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Vector space representation of a two-variable regression model — regvec3d"><meta property="og:description" content="regvec3d calculates the 3D vectors that represent the projection of a two-variable multiple
regression model from n-D observation space into the 3D mean-deviation variable space that they span, thus
showing the regression of y on x1 and x2 in the model lm(y ~ x1 + x2).
The result can be used to draw 2D and 3D vector diagrams accurately reflecting the partial and marginal
relations of y to x1 and x2 as vectors in this representation."><meta property="og:image" content="http://friendly.github.io/matlib/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matlib</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-beta.html">Vector Spaces of Least Squares and Linear Equations</a>
    </li>
    <li>
      <a href="../articles/det-ex1.html">Properties of determinants</a>
    </li>
    <li>
      <a href="../articles/det-ex2.html">Evaluation of determinants</a>
    </li>
    <li>
      <a href="../articles/eigen-ex1.html">Eigenvalues and Eigenvectors: Properties</a>
    </li>
    <li>
      <a href="../articles/eigen-ex2.html">Eigenvalues: Spectral Decomposition</a>
    </li>
    <li>
      <a href="../articles/ginv.html">Generalized inverse</a>
    </li>
    <li>
      <a href="../articles/gramreg.html">Gram-Schmidt Orthogonalization and Regression</a>
    </li>
    <li>
      <a href="../articles/inv-ex1.html">Inverse of a matrix</a>
    </li>
    <li>
      <a href="../articles/inv-ex2.html">Matrix inversion by elementary row operations</a>
    </li>
    <li>
      <a href="../articles/linear-equations.html">Solving Linear Equations</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/friendly/matlib/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Vector space representation of a two-variable regression model</h1>
    <small class="dont-index">Source: <a href="https://github.com/friendly/matlib/blob/HEAD/R/regvec3d.R" class="external-link"><code>R/regvec3d.R</code></a></small>
    <div class="hidden name"><code>regvec3d.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>regvec3d</code> calculates the 3D vectors that represent the projection of a two-variable multiple
regression model from n-D <em>observation</em> space into the 3D mean-deviation <em>variable</em> space that they span, thus
showing the regression of <code>y</code> on <code>x1</code> and <code>x2</code> in the model <code>lm(y ~ x1 + x2)</code>.
The result can be used to draw 2D and 3D vector diagrams accurately reflecting the partial and marginal
relations of <code>y</code> to <code>x1</code> and <code>x2</code> as vectors in this representation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">regvec3d</span><span class="op">(</span><span class="va">x1</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for formula</span></span>
<span><span class="fu">regvec3d</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  which <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  <span class="va">name.x1</span>,</span>
<span>  <span class="va">name.x2</span>,</span>
<span>  <span class="va">name.y</span>,</span>
<span>  <span class="va">name.e</span>,</span>
<span>  <span class="va">name.y.hat</span>,</span>
<span>  <span class="va">name.b1.x1</span>,</span>
<span>  <span class="va">name.b2.x2</span>,</span>
<span>  abbreviate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">regvec3d</span><span class="op">(</span></span>
<span>  <span class="va">x1</span>,</span>
<span>  <span class="va">x2</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  normalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  name.x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name.e <span class="op">=</span> <span class="st">"residuals"</span>,</span>
<span>  name.y.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat"</span><span class="op">)</span>,</span>
<span>  name.b1.x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"b1"</span>, <span class="va">name.x1</span><span class="op">)</span>,</span>
<span>  name.b2.x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"b2"</span>, <span class="va">name.x2</span><span class="op">)</span>,</span>
<span>  name.y1.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat 1"</span><span class="op">)</span>,</span>
<span>  name.y2.hat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name.y</span>, <span class="st">"hat 2"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x1</dt>
<dd><p>The generic argument or the first predictor passed to the default method</p></dd>


<dt>...</dt>
<dd><p>Arguments passed to methods</p></dd>


<dt>formula</dt>
<dd><p>A two-sided formula for the linear regression model. It must contain two quantitative predictors
(<code>x1</code> and <code>x2</code>) on the right-hand-side.  If further predictors are included, <code>y</code>,
<code>x1</code> and <code>x2</code> are taken as residuals from the their linear fits on these variables.</p></dd>


<dt>data</dt>
<dd><p>A data frame in which the variables in the model are found</p></dd>


<dt>which</dt>
<dd><p>Indices of predictors variables in the model taken as <code>x1</code> and <code>x2</code></p></dd>


<dt>name.x1</dt>
<dd><p>Name for <code>x1</code> to be used in the result and plots. By default, this is taken as the
name of the <code>x1</code> variable in the <code>formula</code>, possibly abbreviated according to <code>abbreviate</code>.</p></dd>


<dt>name.x2</dt>
<dd><p>Ditto for the name of <code>x2</code></p></dd>


<dt>name.y</dt>
<dd><p>Ditto for the name of <code>y</code></p></dd>


<dt>name.e</dt>
<dd><p>Name for the residual vector. Default: <code>"residuals"</code></p></dd>


<dt>name.y.hat</dt>
<dd><p>Name for the fitted vector</p></dd>


<dt>name.b1.x1</dt>
<dd><p>Name for the vector corresponding to the partial coefficient of <code>x1</code></p></dd>


<dt>name.b2.x2</dt>
<dd><p>Name for the vector corresponding to the partial coefficient of <code>x2</code></p></dd>


<dt>abbreviate</dt>
<dd><p>An integer.  If <code>abbreviate &gt;0</code>, the names of <code>x1</code>, <code>x2</code> and <code>y</code>
are abbreviated to this length before being combined with the other <code>name.*</code> arguments</p></dd>


<dt>x2</dt>
<dd><p>second predictor variable in the model</p></dd>


<dt>y</dt>
<dd><p>response variable in the model</p></dd>


<dt>scale</dt>
<dd><p>logical; if <code>TRUE</code>, standardize each of <code>y</code>, <code>x1</code>, <code>x2</code> to standard scores</p></dd>


<dt>normalize</dt>
<dd><p>logical; if <code>TRUE</code>, normalize each vector relative to the maximum length of all</p></dd>


<dt>name.y1.hat</dt>
<dd><p>Name for the vector corresponding to the marginal coefficient of <code>x1</code></p></dd>


<dt>name.y2.hat</dt>
<dd><p>Name for the vector corresponding to the marginal coefficient of <code>x2</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class “regvec3d”, containing the following components</p>
<dl><dt>model</dt>
<dd><p>The “lm” object corresponding to <code>lm(y ~ x1 + x2)</code>.</p></dd>

            <dt>vectors</dt>
<dd><p>A 9 x 3 matrix, whose rows correspond to the variables in the model,
               the residual vector, the fitted vector, the partial fits for <code>x1</code>, <code>x2</code>,
               and the marginal fits of <code>y</code> on <code>x1</code> and <code>x2</code>.
               The columns effectively represent <code>x1</code>, <code>x2</code>, and <code>y</code>, but
               are named <code>"x"</code>, <code>"y"</code> and <code>"z"</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>If additional variables are included in the model, e.g., <code>lm(y ~ x1 + x2 + x3 + ...)</code>, then
<code>y</code>, <code>x1</code> and <code>x2</code> are all taken as <em>residuals</em> from their separate linear fits
on <code>x3 + ...</code>, thus showing their partial relations net of (or adjusting for) these additional predictors.</p>
<p>A 3D diagram shows the vector <code>y</code> and the plane formed by the predictors,
<code>x1</code> and <code>x2</code>, where all variables are represented in deviation form, so that
the intercept need not be included.</p>
<p>A 2D diagram, using the first two columns of the result, can be used to show the projection
of the space in the <code>x1</code>, <code>x2</code> plane.</p>
<p>In these views, the ANOVA representation of the various sums of squares for the regression
predictors appears as the lengths of the various vectors.  For example, the error sum of
squares is the squared length of the <code>e</code> vector, and the regression sum of squares is
the squared length of the <code>yhat</code> vector.</p>
<p>The drawing functions <code><a href="vectors.html">vectors</a></code> and <code>link{vectors3d}</code> used by the <code><a href="plot.regvec3d.html">plot.regvec3d</a></code> method only work
reasonably well if the variables are shown on commensurate scales, i.e., with
either <code>scale=TRUE</code> or <code>normalize=TRUE</code>.</p>
    </div>
    <div id="methods-by-class-">
    <h2>Methods (by class)</h2>
    
<ul><li><p><code>regvec3d(formula)</code>: Formula method for regvec3d</p></li>
<li><p><code>regvec3d(default)</code>: Default method for regvec3d</p></li>
</ul></div>
    <div id="references">
    <h2>References</h2>
    <p>Fox, J. (2016). <em>Applied Regression Analysis and Generalized Linear Models</em>, 3rd ed., Sage, Chapter 10.</p>
<p>Fox, J. and Friendly, M. (2016). "Visualizing Simultaneous Linear Equations, Geometric Vectors, and
Least-Squares Regression with the matlib Package for R". <em>useR Conference</em>, Stanford, CA, June 27 - June 30, 2016.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="plot.regvec3d.html">plot.regvec3d</a></code></p>
<p>Other vector diagrams: 
<code><a href="Proj.html">Proj</a>()</code>,
<code><a href="arc.html">arc</a>()</code>,
<code><a href="arrows3d.html">arrows3d</a>()</code>,
<code><a href="circle3d.html">circle3d</a>()</code>,
<code><a href="corner.html">corner</a>()</code>,
<code><a href="plot.regvec3d.html">plot.regvec3d</a>()</code>,
<code><a href="pointOnLine.html">pointOnLine</a>()</code>,
<code><a href="vectors3d.html">vectors3d</a>()</code>,
<code><a href="vectors.html">vectors</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmurdoch/rgl" class="external-link">rgl</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">therapy.vec</span> <span class="op">&lt;-</span> <span class="fu">regvec3d</span><span class="op">(</span><span class="va">therapy</span> <span class="op">~</span> <span class="va">perstest</span> <span class="op">+</span> <span class="va">IE</span>, data<span class="op">=</span><span class="va">therapy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">therapy.vec</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        x         y         z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> perstest      0.50000000 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IE            0.02000000 0.3893584 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy       0.60000000 0.7499516 0.2785185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> residuals     0.00000000 0.0000000 0.2785185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat   0.60000000 0.7499516 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b1 perstest   0.56147757 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b2 IE         0.03852243 0.7499516 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat 1 0.60000000 0.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> therapy hat 2 0.04000000 0.7787169 0.0000000</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">therapy.vec</span>, col.plane<span class="op">=</span><span class="st">"darkgreen"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">therapy.vec</span>, dimension<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="regvec3d-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Friendly, John Fox, Phil Chalmers.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

